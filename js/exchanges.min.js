var Exchanges=Exchanges||{},Data=[];Exchanges.init=function(){Data=Exchanges.rates.getData(),Exchanges.filterData(),$(".nav li a").click(function(t){t.preventDefault(),$(".nav li a").removeClass("active"),$(this).addClass("active"),Exchanges.filterData($(this).data("filter"))})},Exchanges.rates={data:function(t){return Data=Data||Exchanges.rates.getData()},getData:function(t){for(var e,a,r="historical",n="855fc69c6893c1f299c6572fd65afcf4",s=(t=void 0!==t?t:new Date,function(t,e){for(var a=0;a<e.length;a++)t.hasOwnProperty(e[a])&&delete t[e[a]]}),c={},i=6;i>=0;i--){var o=(e=i,a=void 0,(a=new Date(t)).setDate(a.getDate()-e),a);dd=o.getDate()<10?"0"+o.getDate():o.getDate().toString(),mm=o.getMonth()+1<10?"0"+(o.getMonth()+1):(o.getMonth()+1).toString(),yyyy=o.getFullYear(),dateString=yyyy+"-"+mm+"-"+dd,console.log("http://apilayer.net/api/"+r+"?access_key="+n+"&date="+dateString+"&currencies=BRL,EUR,ARS&format=1"),$.ajax({url:"http://apilayer.net/api/"+r+"?access_key="+n+"&date="+dateString+"&currencies=BRL,EUR,ARS&format=1",type:"get",dataType:"json",async:!1,success:function(t){s(t,["success","terms","privacy","historical","source"]),c[i]=t}})}return c}},Exchanges.filterData=function(t){t=void 0!==t?t:"USDBRL";for(var e=Exchanges.rates.data(),a=[],r=Object.keys(e).length-1;r>=0;r--){var n=new Date(1e3*e[r].timestamp);n=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear();var s=e[r].quotes[t];if("USDBRL"!=t)s=e[r].quotes.USDBRL/s;a[r]={data:n,"cotação":s.toFixed(3)}}var c=t.substring(3,6);switch(c){case"BRL":c="Dólar comercial (USD)";break;case"EUR":c="Euro (EUR)";break;case"ARS":c="Peso argentino (ARS)"}Exchanges.renderTable("#container-table",a),Exchanges.renderChart("#container-chart",c)},Exchanges.renderTable=function(t,e){$(t).empty().append('<table class="table table-striped table-bordered"><thead><th>Data</th><th>Cotação</th></thead><tbody></tbody></table>'),$(t+" table").dynatable({dataset:{records:e},features:{paginate:!1,search:!1,recordCount:!1}})},Exchanges.renderChart=function(t,e){$(t).empty(),$(t).highcharts({data:{table:"container-table"},chart:{type:"line"},xAxis:{type:"datetime",tickInterval:864e5,dateTimeLabelFormats:{day:"%e/%b"}},yAxis:{labels:{format:"{value:.2f} BRL"}},title:{text:e},tooltip:{pointFormat:"{series.name}: {point.y:.2f}"}})};