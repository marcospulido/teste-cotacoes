var Exchanges=Exchanges||{},Data=[];Exchanges.init=function(){Data=Exchanges.rates.getData(),Exchanges.filterData(),$(".nav li").click(function(e){e.preventDefault(),$(".nav li").removeClass("active"),$(this).addClass("active"),Exchanges.filterData($(this).data("filter"))})},Exchanges.rates={data:function(e){return Data=Data||Exchanges.rates.getData()},getData:function(e){for(var t="historical",a="d75b3783c0e1c2c46e612f64825676c3",e="undefined"!=typeof e?e:new Date,n=7,r=function(e,t){for(var a=0;a<t.length;a++)e.hasOwnProperty(t[a])&&delete e[t[a]]},s={},c=function(e,t){var a=new Date(e);return a.setDate(a.getDate()-t),a},i=n-1;i>=0;i--){var o=c(e,i);dd=o.getDate(),mm=o.getMonth()+1<10?"0"+(o.getMonth()+1):(o.getMonth()+1).toString(),yyyy=o.getFullYear(),dateString=yyyy+"-"+mm+"-"+dd,$.ajax({url:"http://apilayer.net/api/"+t+"?access_key="+a+"&date="+dateString+"&currencies=BRL,EUR,ARS&format=1",type:"get",dataType:"json",async:!1,success:function(e){r(e,["success","terms","privacy","historical","source"]),s[i]=e}})}return s}},Exchanges.filterData=function(e){for(var e="undefined"!=typeof e?e:"USDBRL",t=Exchanges.rates.data(),a=[],n=Object.keys(t).length-1;n>=0;n--){var r=new Date(1e3*t[n].timestamp);r=r.getDate()+"/"+r.getMonth()+"/"+r.getFullYear();var s=t[n].quotes[e];if("USDBRL"!=e)var c=t[n].quotes.USDBRL,s=c/s;a[n]={data:r,"cotação":s.toFixed(3)}}var i=e.substring(3,6);switch(i){case"BRL":i="Dólar comercial (USD)";break;case"EUR":i="Euro (EUR)";break;case"ARS":i="Peso argentino (ARS)"}Exchanges.renderTable("#container-table",a),Exchanges.renderChart("#container-chart",i)},Exchanges.renderTable=function(e,t){$(e).empty().append('<table class="table table-striped table-bordered"><thead><th>Data</th><th>Cotação</th></thead><tbody></tbody></table>'),$(e+" table").dynatable({dataset:{records:t},features:{paginate:!1,search:!1,recordCount:!1}})},Exchanges.renderChart=function(e,t){$(e).empty(),$(e).highcharts({data:{table:"container-table"},chart:{type:"line"},xAxis:{type:"datetime",tickInterval:864e5,dateTimeLabelFormats:{day:"%e/%b"}},yAxis:{labels:{format:"{value:.2f} BRL"}},title:{text:t},tooltip:{pointFormat:"{series.name}: {point.y:.2f}"}})};